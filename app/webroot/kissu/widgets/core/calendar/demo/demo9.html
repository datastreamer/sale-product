<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Calendar Demos</title>
	<script src="../../../../scripts/jquery.js" type="text/javascript" class="view-source"></script>
	<script src="../../../../scripts/jquery.utils.js" type="text/javascript" class="view-source"></script>
	<link  href="../../../../themes/default/ui.css" type="text/css" rel="stylesheet"  class="view-source"/>
	<!-- 换肤 -->
	<script src="../../../demos.js" type="text/javascript"></script>
	<script type="text/javascript" src="../../../theme_cookie.js"></script>
	
	<script src="../../../../scripts/jquery_ui/jquery.ui.position.js" type="text/javascript" class="view-source"></script>
	<script src="../../calendar/WdatePicker.js" type="text/javascript" class="view-source"></script>
	

<script class="view-source noparse">
function cDayFunc4Changing(){
	$("#content").html($("#content").html() + "<br/>触发dchanging事件<br/>" + cFunc('d'));
}
function cMonthFunc4Changing(){
	$("#content").html($("#content").html() + "<br/>触发Mchanging事件<br/>" + cFunc('M'));
}
function cYearFunc4Changing(){
	$("#content").html($("#content").html() + "<br/>触发ychanging事件<br/>" + cFunc('y'));
}

function cDayFunc4Changed(){
	$("#content").html($("#content").html() + "<br/>触发dchanged事件<br/>" + cFunc('d'));
}
function cMonthFunc4Changed(){
	$("#content").html($("#content").html() + "<br/>触发Mchanged事件<br/>" + cFunc('M'));
}
function cYearFunc4Changed(){
	$("#content").html($("#content").html() + "<br/>触发ychanged事件<br/>" + cFunc('y'));
}

function cFunc(who){
	var str,p,c = $dp.cal;
	if(who=='y'){
		str='年份';
		p='y';
	}
	else if(who=='M'){
		str='月份';
		p='M';
	}
	else if(who=='d'){
		str='日期';
		p='d';
	}
	return str+'发生改变了!\n$dp.cal.date.'+p+'='+c.date[p]+'\n$dp.cal.newdate.'+p+'='+c.newdate[p];
}

$(function(){
	$("#date").calendar({
	  onpicking:function(dp){
	  	  $("#content").html($("#content").html() + "<br/>触发onpicking事件<br/>日期框原来的值为:" + dp.cal.getDateStr() + ', 要用新选择的值:' + dp.cal.getNewDateStr());
	  },
	  onpicked:function(){
	     $("#content").html($("#content").html() + "<br/>触发onpicked事件<br/>已选择的日期为：" + this.value);
	   },
	   onclearing:function(){
	   	  $("#content").html($("#content").html() + "<br/>触发onclearing事件<br/>日期框的值为:" + this.value);
	   },
	   oncleared:function(dp){
	   	   $("#content").html($("#content").html() + "<br/>触发oncleared事件<br/>当前日期所选择的月份为:" + dp.cal.date.M);
	   },
	   dchanging:cDayFunc4Changing, 
	   Mchanging:cMonthFunc4Changing,
		   ychanging:cYearFunc4Changing, 
		   dchanged:cDayFunc4Changed, 
		   Mchanged:cMonthFunc4Changed, 
		   ychanged:cYearFunc4Changed
	})
});

function clearResult(){
	$("#content").html(" ");
}
</script>	
	
</head>

<body>
	
<div id='content-default' class='demo view-source noparse'>
	<div id="calendar_div">
		<input type="text" id="date" class="Wdate"/>
		<br/><br/>
 		<b>事件触发结果打印：</b><input type="button" value="清除结果" onclick="clearResult()"/>
		<div id="content" class='ui-state-highlight'>...</div>
	</div>
</div>
</body>
</html>
	
		<style>
			body{
				overflow:hidden;
				padding:0px;
			}
		</style>
		<script>
			(function(){
				window._setIFrameHeight = function(iframe,height){
				   if($.browser.msie&&($.browser.version==6.0)&&!$.support.style){
						//do nothing
				   }else{
						$(iframe).css("height",height+"px") ;
				   }
					window._agentAutoHeight() ;
				} ;
				
				function agentAutoHeight(){
					var bHeight = document.body.scrollHeight;
					var dHeight = document.documentElement.scrollHeight;
					var oHeight = document.body.offsetHeight;
					var b_height =Math.max(oHeight,Math.max(bHeight,dHeight))+50;
					
					var b_iframe = document.getElementById("crossdomain_agent_iframe");     
					var src = b_iframe.src.split("#")[0] ;
					b_iframe.src = src+"#"+b_height;
				}
				
				window._agentAutoHeight = agentAutoHeight ;
			
			
				if(window.location.href.indexOf("/agent.html")!=-1)
					return ;
			
				function getHost(){
					var host = window.location.host ;
					return host.split(":")[0] ;
				}
				
				var baseUrl = "http://"+getHost()+":8001/bingo-ui-web" ;
				var _crossdomain_agent_iframe_url = baseUrl+"/view/crossdomain/agent.html"  ;
				
				
				if(!window.$){
					document.write('<script src="'+baseUrl+"/statics/scripts/jquery.js"+'" onload="_loadjQuery()">\<\/script>') ;
					
					window._loadjQuery = function(){
						$(document.body).append('<iframe id="crossdomain_agent_iframe"  width="100%"  src="'+_crossdomain_agent_iframe_url+'" style="display:none"> ');
						agentAutoHeight() ;
						setTimeout(function(){
							agentAutoHeight() ;
						},500) ;
					}
				}else{
					$(document.body).append('<iframe id="crossdomain_agent_iframe"  width="100%"  src="'+_crossdomain_agent_iframe_url+'" style="display:none"> ');
					$(function(){
						agentAutoHeight() ;
						setTimeout(function(){
							agentAutoHeight() ;
						},500) ;
					}) ;
				}
			})() ;
		</script>
	
