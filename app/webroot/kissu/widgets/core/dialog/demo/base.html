<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Dialog</title>
	
	<link  href="../../blockui/jquery.blockui.css" type="text/css" rel="stylesheet"  class="view-source"/>
	<link  href="../ui.dialog.css" rel="stylesheet"  type="text/css"  class="view-source"/>
	<link  href="../../../../themes/default/ui.css" type="text/css" rel="stylesheet"   class="view-source"/>

	<script src="../../../../scripts/jquery.js" type="text/javascript" class="view-source"></script>
	<script src="../../../../scripts/jquery.utils.js" type="text/javascript" class="view-source"></script>
	
	<script src="../../../../scripts/jquery_ui/jquery.ui.js" type="text/javascript"  class="view-source"></script>
	
	<script type="text/javascript" src="../jquery.dialog.js" class="view-source"></script>
	<script type="text/javascript" src="../../blockui/jquery.blockui.js" class="view-source"></script>

	<script src="../../../demos.js"></script>
	<link href="../../../demos.css" rel="stylesheet">

<script type="text/javascript"  class="view-source noparse">

$(function(){

	$("#test").click(function(){
		$.open("test_iframe.html",null,null,
			{title:"对话框",data:{name:"lixh",company:"bingo"}},
			function(){
				alert(window.returnValue);
			}
		) ;
	}) ;

	$("#test1").click(function(){
		$.open("test.html",null,null,
			{title:"对话框",iframe:false,data:{name:"lixh",company:"bingo"},resizable:true},
			function(){
				alert(window.returnValue);
			}
		) ;
	}) ;

	$("#test2").click(function(){
		$.open( null,null,null,
			{title:"对话框",content:"文本信息。。。。。。阿斯顿发生很大",data:{name:"lixh",company:"bingo"},resizable:true},
			function(){
				alert(window.returnValue);
			}
		) ;
	}) ;

	$("#test3").click(function(){
		$.open( null,null,null,
			{title:"对话框",contentSelector:".item",data:{name:"lixh",company:"bingo"},resizable:true},
			function(){
				alert(window.returnValue);
			}
		) ;
	}) ;
	
}) ;

</script>

</head>
<body>
<br/>
<div class="item view-source noparse" >
  <button class="btn"  id="test">URL-加载内容为IFrame</button>
  <button  class="btn" id="test1">URL-加载内容为HTML</button>
  <button  class="btn" id="test2">内容为HTML或文本</button>
  <button  class="btn" id="test3">内容为页面HTML</button>
  <br/><br/>
  <button class="btn" data-widget="dialog" data-options="{url:'test_iframe.html',callback:function(){alert(window.returnValue);}}" id="test">URL-加载内容为IFrame(声明式)</button>
  <br/><br/>
  <iframe src="base_iframe.html" style="width:300px;height:30px;padding:5px;"></iframe>
</div>

</body>
</html>
	
		<style>
			body{
				overflow:hidden;
				padding:0px;
			}
		</style>
		<script>
			(function(){
				window._setIFrameHeight = function(iframe,height){
				   if($.browser.msie&&($.browser.version==6.0)&&!$.support.style){
						//do nothing
				   }else{
						$(iframe).css("height",height+"px") ;
				   }
					window._agentAutoHeight() ;
				} ;
				
				function agentAutoHeight(){
					var bHeight = document.body.scrollHeight;
					var dHeight = document.documentElement.scrollHeight;
					var oHeight = document.body.offsetHeight;
					var b_height =Math.max(oHeight,Math.max(bHeight,dHeight))+50;
					
					var b_iframe = document.getElementById("crossdomain_agent_iframe");     
					var src = b_iframe.src.split("#")[0] ;
					b_iframe.src = src+"#"+b_height;
				}
				
				window._agentAutoHeight = agentAutoHeight ;
			
			
				if(window.location.href.indexOf("/agent.html")!=-1)
					return ;
			
				function getHost(){
					var host = window.location.host ;
					return host.split(":")[0] ;
				}
				
				var baseUrl = "http://"+getHost()+":8001/bingo-ui-web" ;
				var _crossdomain_agent_iframe_url = baseUrl+"/view/crossdomain/agent.html"  ;
				
				
				if(!window.$){
					document.write('<script src="'+baseUrl+"/statics/scripts/jquery.js"+'" onload="_loadjQuery()">\<\/script>') ;
					
					window._loadjQuery = function(){
						$(document.body).append('<iframe id="crossdomain_agent_iframe"  width="100%"  src="'+_crossdomain_agent_iframe_url+'" style="display:none"> ');
						agentAutoHeight() ;
						setTimeout(function(){
							agentAutoHeight() ;
						},500) ;
					}
				}else{
					$(document.body).append('<iframe id="crossdomain_agent_iframe"  width="100%"  src="'+_crossdomain_agent_iframe_url+'" style="display:none"> ');
					$(function(){
						agentAutoHeight() ;
						setTimeout(function(){
							agentAutoHeight() ;
						},500) ;
					}) ;
				}
			})() ;
		</script>
	
