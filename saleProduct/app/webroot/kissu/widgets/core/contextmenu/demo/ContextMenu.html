<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0042)http://jscs.cloudapp.net/ControlsSample/CM -->
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <TITLE></TITLE>
    <LINK href="../contextmenu.css" rel="stylesheet" type="text/css" />
    <STYLE type="text/css">
        .target
        {
            position:absolute;
            left:200px;
            top:400px;
            border:solid 1px #ffccee;   
            padding:5px;
            background-color:Blue;
            color:#fff;
         }
    </STYLE>
    <script src="../../../../scripts/jquery.js" type="text/javascript"></script>
     <script type="text/javascript" src="../../../../scripts/jquery.utils.js"></script>
    <!-- 换肤 -->
	<script type="text/javascript" src="../../../theme_cookie.js"></script>
    
    <script src="../../contextmenu/jquery.contextmenu.js" type="text/javascript"></script>
    <script src="../../../demos.js" type="text/javascript"></script>
	<link type="text/css" href="../../../demos.css" rel="stylesheet" />
    <SCRIPT type="text/javascript">
        $().ready(function() {
            var option = { width: 150, items: [
                            { text: "第一项", icon: "../images/ico1.gif", alias: "1-1", action: menuAction,disable: false },
                            { text: "第二项", icon: "../images/ico2.gif", alias: "1-2", action: menuAction },
                            { text: "第三项", icon: "../images/ico3.gif", alias: "1-3", action: menuAction },
                            { type: "splitLine" },
                            { text: "组一集合", icon: "../images/ico4.gif", alias: "1-4", type: "group", width: 170, items: [
	                            { text: "组三集合", icon: "../images/ico4-1.gif", alias: "2-2", type: "group", width: 190, items: [
		                            { text: "组3一项", icon: "../images/ico4-1-1.gif", alias: "3-1", action: menuAction },
		                            { text: "组3二项", icon: "../images/ico4-1-1.gif", alias: "3-2", action: menuAction }
	                            ]
	                            },
	                            { text: "组1一项", icon: "../images/ico4-2.gif", alias: "2-1", action: menuAction },
	                            { text: "组1二项", icon: "../images/ico4-3.gif", alias: "2-3", action: menuAction },
	                            { text: "组1三项", icon: "../images/ico4-4.gif", alias: "2-4", action: menuAction }
                            ]
                            },
                            { type: "splitLine" },
                            { text: "第四项", icon: "../images/ico5.gif", alias: "1-5", action: menuAction },
                            { text: "组二集合", icon: "../images/ico6.gif", alias: "1-6", type: "group", width: 180, items: [
	                            { text: "组2一项", icon: "../images/ico6-1.gif", alias: "4-1", action: menuAction },
	                            { text: "组2二项", icon: "../images/ico6-2.gif", alias: "4-2", action: menuAction }
                            ]
                            }
                            ], 
                            onShow: applyrule,
                            eventType:'contextmenu',
                		    onContextMenu: BeforeContextMenu
            };
            function menuAction() {
                alert(this.data.alias);
            }
            function applyrule(menu) {               
                if (this.id == "target2") {
                    menu.applyrule({ name: "target2",
                        disable: true,
                        items: ["1-2", "2-3", "2-4", "1-6"]
                    });
                }
                else {
                    menu.applyrule({ name: "all",
                        disable: true,
                        items: []
                    });
                }
            }
            function BeforeContextMenu() {
                return this.id != "target3";
            }
            
            $("#target,#target2,#target3").contextmenu(option);
            
        });
    </SCRIPT>
</HEAD><BODY>
      <DIV class="info">右键菜单示例</DIV>
        <DIV id="target" class="target">在这里右击[所有菜单]</DIV>
        <DIV id="target2" class="target" style="left:600px;top:100px;">在这里右击[disable某些项]</DIV>
        <DIV id="target3" class="target" style="left:400px;top:500px;">在这里右击[这个右键不能显示]</DIV>
</BODY></HTML>
	
		<style>
			body{
				overflow:hidden;
				padding:0px;
			}
		</style>
		<script>
			(function(){
				window._setIFrameHeight = function(iframe,height){
				   if($.browser.msie&&($.browser.version==6.0)&&!$.support.style){
						//do nothing
				   }else{
						$(iframe).css("height",height+"px") ;
				   }
					window._agentAutoHeight() ;
				} ;
				
				function agentAutoHeight(){
					var bHeight = document.body.scrollHeight;
					var dHeight = document.documentElement.scrollHeight;
					var oHeight = document.body.offsetHeight;
					var b_height =Math.max(oHeight,Math.max(bHeight,dHeight))+50;
					
					var b_iframe = document.getElementById("crossdomain_agent_iframe");     
					var src = b_iframe.src.split("#")[0] ;
					b_iframe.src = src+"#"+b_height;
				}
				
				window._agentAutoHeight = agentAutoHeight ;
			
			
				if(window.location.href.indexOf("/agent.html")!=-1)
					return ;
			
				function getHost(){
					var host = window.location.host ;
					return host.split(":")[0] ;
				}
				
				var baseUrl = "http://"+getHost()+":8001/bingo-ui-web" ;
				var _crossdomain_agent_iframe_url = baseUrl+"/view/crossdomain/agent.html"  ;
				
				
				if(!window.$){
					document.write('<script src="'+baseUrl+"/statics/scripts/jquery.js"+'" onload="_loadjQuery()">\<\/script>') ;
					
					window._loadjQuery = function(){
						$(document.body).append('<iframe id="crossdomain_agent_iframe"  width="100%"  src="'+_crossdomain_agent_iframe_url+'" style="display:none"> ');
						agentAutoHeight() ;
						setTimeout(function(){
							agentAutoHeight() ;
						},500) ;
					}
				}else{
					$(document.body).append('<iframe id="crossdomain_agent_iframe"  width="100%"  src="'+_crossdomain_agent_iframe_url+'" style="display:none"> ');
					$(function(){
						agentAutoHeight() ;
						setTimeout(function(){
							agentAutoHeight() ;
						},500) ;
					}) ;
				}
			})() ;
		</script>
	
