<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>静态数据树</title>
	<script src="../../../../scripts/jquery.js" type="text/javascript" class="view-source"></script>
	<script src="../../../../scripts/jquery.utils.js" type="text/javascript" class="view-source"></script>
	<link  href="../../../../themes/default/ui.css" type="text/css"  class="view-source" rel="stylesheet" />
	
	<script src="../../tree/jquery.tree.js" type="text/javascript" class="view-source"></script>
	
	<link  href="../ui.tree.css" rel="stylesheet" type="text/css"  class="view-source"/>

	<link type="text/css" href="../../../demos.css" rel="stylesheet" />
	<script src="../../../demos.js" type="text/javascript"></script>
	<!-- 换肤 -->
	<script type="text/javascript" src="../../../theme_cookie.js"></script>
<script src="../../../../scripts/jquery_plugins/jquery.json.js" type="text/javascript"></script>	
	<style>
		.tree{
			width:200px;
		}
	</style>
	
<script class="view-source noparse">
$(function(){
	var json_data = {//静态数据
		id:'11',
		text:'根节点',
		isExpand:true,
		childNodes:[
			{
				id:'21',
				text:'数据源表11',
				childNodes:[
					{
						id:'youda1',
						text:'有道1'
					}
				]
			},
			{
				id:'31',
				text:'数据源表二1'
			}
		]
	 } ;


	function menuAddAction(){
		if( !confirm('确认添加子节点吗?') )return ;
		var id = this.data.id ;
		$('#default-tree').tree().addNode( {id:id+'01',text:'动态添加',parentId:id}) ;
	}

	function menuUpdateAction(){
		if( !confirm('确认更新该节点吗?') )return ;
		var id = this.data.id ;
		$('#default-tree').tree().updateNode( {id:id,text:'已经修改'}) ;	
	}

	function menuDeleteAction(){
		if( !confirm('确认删除该节点吗?') )return ;
		var id = this.data.id ;
		$('#default-tree').tree().deleteNode( id ) ;	
	}

	$('#default-tree').tree({//tree为容器ID
		dataSourceMode:'data',
		data:json_data,
		contextMenu:function( record ){
			//record为树查询获取的行对象，可以根据行对象返回对应的右键菜单项
			return { 
					width: 100, 
					items: [
                              { text: "新增", icon: "../../../../themes/common/images/icons/add.gif",id: record.id, action: menuAddAction},
                              { text: "修改", icon: "../../../../themes/common/images/icons/edit.png",id: record.id, action: menuUpdateAction },
                              { type: "splitLine" },
                              { text: "删除", icon: "../../../../themes/common/images/icons/delete.gif",id: record.id, action: menuDeleteAction }
                       ]
                 } ;
		}
          }) ;
	
})
</script>
	
</head>

<body>
	<div id='content-default' class='demo'>
			<h1></h1>
			<div id="default-tree" class="tree" style="padding: 5px;"></div>
	</div>
</body>
</html>
	
		<style>
			body{
				overflow:hidden;
				padding:0px;
			}
		</style>
		<script>
			(function(){
				window._setIFrameHeight = function(iframe,height){
				   if($.browser.msie&&($.browser.version==6.0)&&!$.support.style){
						//do nothing
				   }else{
						$(iframe).css("height",height+"px") ;
				   }
					window._agentAutoHeight() ;
				} ;
				
				function agentAutoHeight(){
					var bHeight = document.body.scrollHeight;
					var dHeight = document.documentElement.scrollHeight;
					var oHeight = document.body.offsetHeight;
					var b_height =Math.max(oHeight,Math.max(bHeight,dHeight))+50;
					
					var b_iframe = document.getElementById("crossdomain_agent_iframe");     
					var src = b_iframe.src.split("#")[0] ;
					b_iframe.src = src+"#"+b_height;
				}
				
				window._agentAutoHeight = agentAutoHeight ;
			
			
				if(window.location.href.indexOf("/agent.html")!=-1)
					return ;
			
				function getHost(){
					var host = window.location.host ;
					return host.split(":")[0] ;
				}
				
				var baseUrl = "http://"+getHost()+":8001/bingo-ui-web" ;
				var _crossdomain_agent_iframe_url = baseUrl+"/view/crossdomain/agent.html"  ;
				
				
				if(!window.$){
					document.write('<script src="'+baseUrl+"/statics/scripts/jquery.js"+'" onload="_loadjQuery()">\<\/script>') ;
					
					window._loadjQuery = function(){
						$(document.body).append('<iframe id="crossdomain_agent_iframe"  width="100%"  src="'+_crossdomain_agent_iframe_url+'" style="display:none"> ');
						agentAutoHeight() ;
						setTimeout(function(){
							agentAutoHeight() ;
						},500) ;
					}
				}else{
					$(document.body).append('<iframe id="crossdomain_agent_iframe"  width="100%"  src="'+_crossdomain_agent_iframe_url+'" style="display:none"> ');
					$(function(){
						agentAutoHeight() ;
						setTimeout(function(){
							agentAutoHeight() ;
						},500) ;
					}) ;
				}
			})() ;
		</script>
	
