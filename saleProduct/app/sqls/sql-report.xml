<?xml version="1.0" encoding="UTF-8"?>
<properties>
	<entry key="sql_report_listingRankForFba">
		SELECT t.* FROM ( 
		     SELECT 
		          srp.NAME,
		          srp.REAL_SKU,
		          srp.IMAGE_URL,
		          saap.ASIN,
		          saa.NAME as ACCOUNT_NAME,
		          saap.ACCOUNT_ID,
		          saap.LIMIT_PRICE,
		          saap.SKU AS SELLER_SKU,
		          sfsi.TOTAL_SUPPLY_QUANTITY ,
		          sfsi.IN_STOCK_SUPPLY_QUANTITY,
		           ( SELECT MIN(sapb.price) 
				FROM sc_amazon_product_bidding sapb 
				WHERE 	sapb.asin = saap.asin 
				    and sapb.seller = saa.name
					AND sapb.type='FBA'  ) AS LIST_PRICE,
		          ( SELECT MIN(sapb.price) 
				FROM sc_amazon_product_bidding sapb 
				WHERE 	sapb.asin = saap.asin 
					AND sapb.type='FBA'  ) AS LOWEST_PRICE
		     FROM    sc_fba_supply_inventory sfsi,
		             sc_amazon_account saa ,
		             sc_amazon_account_product saap
		             LEFT JOIN sc_real_product_rel srpr
		             ON srpr.ACCOUNT_ID = saap.ACCOUNT_ID
		                AND srpr.SKU = saap.SKU
		             LEFT JOIN sc_real_product srp
		             ON srpr.REAL_ID = srp.ID
		     WHERE saap.ACCOUNT_ID = sfsi.ACCOUNT_ID
		           AND saap.SKU = sfsi.SELLER_SKU
		           AND saap.ACCOUNT_ID = saa.ID
		           {@  and saap.account_id =  '#accountId#'}
		           AND sfsi.IN_STOCK_SUPPLY_QUANTITY > 0
		) t
		WHERE t.LIST_PRICE != t.LOWEST_PRICE
		{@ and ( t.ASIN like '%#searchKey#%'  or t.SELLER_SKU like '%#searchKey#%'   or t.REAL_SKU like '%#searchKey#%'  ) }
	</entry>
  <entry key="sql_report_providor_statics">
		SELECT
			  DATE_FORMAT(spp.REAL_PURCHASE_DATE,"%Y-%m" ) AS PURCHASE_DATE ,
			  ss.NAME       AS SUPPLIER_NAME,
			  srp.NAME      AS REAL_PRODUCT_NAME,
			  srp.ID as REAL_ID,
			  srp.REAL_SKU,
			  ss.id as PROVIDOR_ID,
			  srp.IMAGE_URL,
			  SUM(spp.QUALIFIED_PRODUCTS_NUM) AS QUALIFIED_PRODUCTS_NUM ,
			  SUM(spp.BAD_PRODUCTS_NUM) AS BAD_PRODUCTS_NUM
			FROM sc_purchase_product spp,
			  sc_supplier ss,
			  sc_real_product srp
			WHERE spp.REAL_PROVIDOR = ss.id
			    AND spp.REAL_ID = srp.ID
			    AND ss.name like '%{@#supplierName#}%'
			    AND spp.REAL_PURCHASE_DATE like '%{@#purchaseDate#}%'
			GROUP BY spp.REAL_PROVIDOR,spp.REAL_ID,DATE_FORMAT(spp.REAL_PURCHASE_DATE,"%Y-%m" ) 
			ORDER BY spp.REAL_PROVIDOR,DATE_FORMAT(spp.REAL_PURCHASE_DATE,"%Y-%m" )  DESC 
</entry>
    <entry key="sql_report_orderRealProductList_Items">
    		
			SELECT 
			   soi.REAL_ID,
			  srp.IMAGE_URL,
			   soi.REAL_SKU ,
			    srp.NAME,
			    soi.ASIN,
			    (select name from sc_amazon_account where id = soi.ACCOUNT_ID) as ACCOUNT_NAME,
			   soi.SELLER_SKU , 
			   COUNT(1) AS C ,
			   sfsi.TOTAL_SUPPLY_QUANTITY,
			   sfsi.IN_STOCK_SUPPLY_QUANTITY
			 FROM 
			 	sc_real_product srp,
			 	sc_order_item soi
			left join sc_fba_supply_inventory sfsi
				on sfsi.account_id = soi.account_id
					and sfsi.SELLER_SKU = soi.SELLER_SKU
			WHERE 
			soi.REAL_ID = srp.id
			AND soi.PURCHASE_DATE LIKE '{@%#purchaseDate#%}'
			{@ and soi.account_id = '#accountId#'}
			group by soi.seller_sku,soi.account_id
    </entry>
</properties>