<?xml version="1.0" encoding="UTF-8"?>
<properties>
    <entry key="sql_delete_sc_pp">
    	UPDATE SC_PURCHASE_PLAN SET status = '2' where id = '{@#planId#}'
    </entry>
    
    <entry key="sql_purchasePlanProductsIsExists">
    	select * from sc_purchase_plan_details
    	where plan_id = '{@#planId#}' and  sku = '{@#sku#}'
    </entry>
    
    <entry key="sql_insert_purchasePlanProducts">
    	INSERT INTO sc_purchase_plan_details 
				(
				ASIN, 
				SKU, 
				PLAN_ID, 
				CREATOR, 
				CREATE_TIME
				)
				VALUES
				(
				'{@#asin#}', 
				'{@#sku#}', 
				'{@#planId#}', 
				'{@#loginId#}', 
				NOW()
				)
    </entry>
    
    <entry key="sql_checkPurchaseProductIsValid.byAsin">
    	 select srp.* from sc_real_product srp,
    	 		sc_real_product_rel srpr ,
    	 		sc_amazon_account_product saap
    	 		where srp.id = srpr.real_id
    	 		and srpr.sku = saap.sku
    	 		and saap.asin = '{@#asin#}'
    </entry>
    
    <entry key="sql_checkPurchaseProductIsValid.bySku">
    	 select * from sc_real_product srp
    	 		where  srp.real_sku = '{@#sku#}'
    </entry>
    
    <entry key="sql_getProductDevFilter">
    	select t1.* from (
           SELECT sc_product_filter.* ,
          (SELECT COUNT(*) FROM sc_product_filter_details scfd WHERE scfd.task_id = sc_product_filter.id  ) AS TOTAL,
          (SELECT COUNT(*) FROM sc_product_filter_details scfd WHERE scfd.task_id = sc_product_filter.id AND scfd.status in (5,7)) AS STATUS57
          FROM sc_product_filter
          where 1=1
          {@ and sc_product_filter.name like '%#filterName#%'}
          ) t1 where t1.STATUS57 > 0  order by t1.create_time desc
    </entry>
    
    <entry key="sql_getProductDevFilter_Pass_Product">
    	SELECT sp.*, 
    	    (SELECT spi.local_url FROM sc_product_imgs spi WHERE spi.asin = sp.asin LIMIT 0,1 ) AS LOCAL_URL , 
			spfd.id as FILTER_ID, 
			spfd.status as STATUS,
			srp.NAME,
			srp.IMAGE_URL,
			srp.REAL_SKU
		 FROM 
		 			sc_product_filter_details  spfd,
		 			sc_product sp 
		 			left join sc_amazon_account_product saap
		 			on saap.asin = sp.asin
		 			left join sc_real_product_rel srpr
		 			on srpr.sku = saap.sku
		 			left join sc_real_product srp
		 			on srp.id = srpr.real_id
			where sp.asin = spfd.asin
				and spfd.status in (5,7) 
				{@ and sp.title like '%#title#%'  }
				{@ and sp.asin = '#asin#'  }
				{@  and spfd.task_id = '#taskId#'  }
    </entry>
</properties>